# Execution Context

## 실행 콘텍스트

```js
function music(title) {
  var musicTitle = title;
}
music("음악");
```

실행 콘텍스트란 함수가 실행되는 영역, 묶음 입니다.

함수가 실행되는 부분에서 영역이 중요하지만, 개발자 입장에서 묶음이 더 중요합니다.

함수 코드를 실행하고 실행 결과를 저장합니다.

함수에서 실행된 결과, 예를 들면, 변수에 값을 할당하거나 다른 함수를 호출해서 리턴값을 저장하는 등에 실행 결과를 저장하게 됩니다.

그런데 이것은 스펙상의 사양입니다. 즉, 개발자가 실행 콘텍스트를 가지고 무엇인가를 조정할 수는 없습니다.

엔진이 처리하는 것 입니다.

music("음악")으로 함수를 호출하면 엔진은 실행 콘텍스트를 만듭니다.

그리고 실행 콘텍스트 안으로 이동합니다. 이것이 엔진 컨트롤이 실행 콘텍스트 안으로 이동한다라고 합니다.

실행 콘텍스트는 크게 3 단계로 나눕니다.

1. 준비 단계
2. 초기화 단계
3. 코드 실행 단계

실행 콘텍스트를 만드는 시점은 실행 가능한 코드를 만났을 때 입니다.

여기서 실행 가능한 코드란, 함수 코드, 글로벌 코드, eval 코드 입니다.

이렇게 코드 유형을 분리한 이유는 실행 콘텍스트에서 처리하는 방법과 실행 환경이 다르기 때문입니다.

즉, 엔진 관점에서 접근한 것 입니다.

함수 코드는 렉시컬 환경, 즉, 정적 환경에서 실행됩니다.

글로벌 코드는 글로벌 환경에서 실행됩니다.

eval 코드는 문자열이니까 파싱하고 해석을 해야 합니다. 그러므로 동적 환경에서 실행하게 됩니다.

## 실행 콘텍스트 상태 컴포넌트

실행 콘텍스트 상태를 위한 오브젝트입니다.

```js
실행 콘텍스트(EC): {
  렉시컬 환경 컴포넌트(LEC): {},
  변수 환경 컴포넌트(VEC): {},
  this 바인딩 컴포넌트(TBC): {}
}
```

그리고 이것을 실행 콘텍스트 안에 생성합니다.

상태 컴포넌트 유형

1. 렉시컬 환경 컴포넌트(LEC): Lexical Environment Component
2. 변수 환경 컴포넌트(VEC): Variable Environment Component
3. this 바인딩 컴포넌트(TBC): This Binding Component

렉시컬 환경과 변수 환경은 초기값이 같습니다. 그런데 이렇게 별도로 나눈 것은 복원을 하기 위한 것 입니다. 다시 돌아왔을 때 변수 환경에 초기값을 렉시컬 환경에 설정하기 위함 입니다.

그런데, 렉시컬 환경은 정적 환경이지만 조금 더 들어가면 글로벌 환경과 동적 환경을 같이 사용할 수 있습니다.

그리고 this 바인딩 컴포넌트는 함수 안에서 this로 참조하는 오브젝트 입니다.

예를 들면, obj.abc를 했다고 했을 때 obj를 abc 함수 안에서 this로 참조할 수 있습니다. 그런 것을 this 바인딩 컴포넌트에 바인딩 시키는 것 입니다.

엔진 관점의 컴포넌트 개념이라고 생각하면 됩니다.
