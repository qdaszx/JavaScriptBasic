## 렉시컬 환경 컴포넌트

렉시컬 환경 컴포넌트란 함수와 변수의 식별자 해결을 위한 환경을 설정합니다.

그리고 함수 초기화 단계에서 해석한 함수와 변수를 `{name: value}` 형태로 저장합니다

변수는 name과 undefined로 저장될 것 입니다.

함수 선언문은 name과 function 오브젝트로 저장될 것 입니다.

이렇게 함으로써 이름으로 함수와 변수를 검색할 수 있게 됩니다.

즉, 식별자 해결을 할 수 있게 됩니다.

함수 밖의 함수와 변수를 참조할 수 있는 환경을 설정합니다.

즉, 내가 속한 오브젝트의 환경을 설정하는 것 입니다. 따라서 렉시컬 환경 컴포넌트 안에서 함수 밖의 함수와 변수를 사용할 수 있게 됩니다.

즉, 하나의 콘텍스트가 되는 것 입니다. 함수 안에 있는 것과 함수 밖에 있는 것을 하나의 묶음으로 렉시컬 환경 컴포넌트에 만들어 버리는 것 입니다.

그러면서 매우 심플해졌습니다.

## 렉시컬 환경 컴포넌트 구성

렉시컬 환경 컴포넌트는 이와 같이 구성합니다.

```js
실행 콘텍스트(EC): {
  렉시컬 환경 컴포넌트(LEC): {
    환경 레코드(ER): {
      point: 100
    },
    외부 렉시컬 환경 참조(OLER): {
      title: "책",
      getTitle: function(){}
    }
  }
}
```

렉시컬 환경 컴포넌트를 생성합니다. 실행 콘텍스트에 만들어서 첨부 시킵니다.

function, with, try-catch문을 만났을 때 렉시컬 환경 컴포넌트를 생성합니다.

컴포넌트 구성은 환경 레코드와 외부 렉시컬 환경 참조가 있습니다.

그 안에 변수와 함수가 설정되는 것 입니다.

물론 환경 레코드는 한 단계 더 내려갈 수 있습니다.

## 렉시컬 환경 컴포넌트 설정

환경 레코드에 함수 안의 변수와 함수를 기록합니다.

외부 렉시컬 환경 참조에 function 오브젝트의 내부 프로퍼티인 `[[Scope]]`를 설정합니다.

함수 안과 밖의 함수와 변수를 하나의 콘텍스트 개념으로 사용할 수 있게 되는 것 입니다.

환경 레코드와 외부 렉시컬 환경 참조는 하나의 묶음, 하나의 콘텍스트, 렉시컬 환경 컴포넌트입니다.

## 외부 렉시컬 환경 참조

스코프와 실행 중인 함수가 Context 형태입니다.

외부 렉시컬 환경 참조는 함수가 속한 스코프입니다.

실행 중인 함수가 환경 레코드에 다 들어있습니다. 그래서 하나의 Context, 하나의 묶음이 됩니다.

그러므로 스코프의 변수와 함수를 별도의 처리없이 즉시 사용할 수 있습니다.

그래서 실행 콘텍스트에서 함수 안과 밖의 함수, 변수를 사용할 수 있습니다.

그래서 함수와 변수를 찾기 위해서 실행 콘텍스트를 벗어 나지 않아도 됩니다.

## 변수 환경 컴포넌트

```js
실행 콘텍스트(EC): {
  렉시컬 환경 컴포넌트(LEC): {},
  변수 환경 컴포넌트(VEC): {},
  this 바인딩 컴포넌트(TBC): {}
}
```

실행 콘텍스트 초기화 단계에서 렉시컬 환경 컴포넌트와 같게 설정합니다.(렉시컬 환경 === 변수 환경)

이렇게 하는 이유는 초깃값을 복원할 때 사용하기 위한 것 입니다.

함수 안에 있는 코드가 실행되면 실행 결과를 렉시컬 환경 컴포넌트에 설정합니다. (렉시컬 환경 !== 변수 환경)

초깃값 복원은 with문 쓸 때 사용합니다.
